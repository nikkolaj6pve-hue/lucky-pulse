<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Lucky Pulse Ultimate</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050508;
            --surface: #111116;
            --accent: #00f2ff;
            --pink: #ff00d4;
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.08);
        }

        body {
            background-color: var(--bg);
            color: white;
            font-family: 'Plus Jakarta Sans', sans-serif;
            margin: 0; padding: 0;
            overflow: hidden;
            height: 100vh;
            display: flex; flex-direction: column;
        }

        /* --- –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò --- */
        #loader {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: var(--bg);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 9999; transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .loader-logo {
            width: 100px; height: 100px;
            background: linear-gradient(135deg, var(--accent), var(--pink));
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            animation: morph 3s linear infinite, spin 4s linear infinite;
            box-shadow: 0 0 50px rgba(0, 242, 255, 0.3);
        }

        @keyframes morph {
            0%, 100% { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
            50% { border-radius: 70% 30% 30% 70% / 70% 70% 30% 30%; }
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- –ì–õ–ê–í–ù–´–ô –ò–ù–¢–ï–†–§–ï–ô–° --- */
        .app-content { opacity: 0; transform: scale(0.9); transition: 0.6s ease; padding: 20px; flex: 1; overflow-y: auto; }
        .app-ready .app-content { opacity: 1; transform: scale(1); }

        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .balance-box {
            background: var(--surface); padding: 10px 20px; border-radius: 20px;
            border: 1px solid var(--border); box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .balance-amount { font-family: 'Orbitron'; color: var(--accent); font-size: 1.2rem; }

        /* --- –°–õ–û–¢ –ú–ê–®–ò–ù–ê --- */
        .slot-section {
            background: var(--surface); border-radius: 30px; padding: 25px;
            border: 1px solid var(--border); position: relative; overflow: hidden;
            text-align: center; margin-bottom: 20px;
        }
        .slot-reels {
            display: flex; justify-content: center; gap: 15px; margin: 20px 0;
            font-size: 3rem; background: rgba(0,0,0,0.4); padding: 20px; border-radius: 20px;
        }
        .reel { width: 60px; height: 80px; display: flex; align-items: center; justify-content: center; }

        .btn-spin {
            width: 100%; background: linear-gradient(90deg, var(--accent), var(--pink));
            border: none; border-radius: 20px; padding: 18px; color: white;
            font-size: 1.1rem; font-weight: 800; cursor: pointer; text-transform: uppercase;
            box-shadow: 0 10px 25px rgba(255, 0, 212, 0.3); transition: 0.2s;
        }
        .btn-spin:active { transform: translateY(3px); filter: brightness(1.2); }

        /* --- –°–ò–°–¢–ï–ú–ê –ü–†–û–ú–û / –†–ï–§ --- */
        .info-card {
            background: var(--glass); border-radius: 20px; padding: 20px;
            border: 1px solid var(--border); margin-bottom: 15px;
        }
        .info-card h4 { margin: 0 0 10px; color: var(--accent); font-size: 0.9rem; letter-spacing: 1px; }
        input {
            width: 100%; background: rgba(0,0,0,0.5); border: 1px solid var(--border);
            padding: 12px; border-radius: 12px; color: white; outline: none; box-sizing: border-box;
        }

        /* --- NAVBAR --- */
        .nav {
            background: rgba(10,10,15,0.9); backdrop-filter: blur(10px);
            padding: 20px; display: flex; justify-content: space-around;
            border-top: 1px solid var(--border);
        }
        .nav-item { opacity: 0.5; font-size: 1.4rem; transition: 0.3s; cursor: pointer; }
        .nav-item.active { opacity: 1; color: var(--accent); transform: scale(1.2); }

    </style>
</head>
<body>

    <div id="loader">
        <div class="loader-logo"></div>
        <h1 style="font-family: 'Orbitron'; letter-spacing: 4px; margin-top: 30px;">LUCKY PULSE</h1>
        <p style="color: var(--accent); font-size: 0.8rem; opacity: 0.7;">INITIALIZING SYSTEMS...</p>
    </div>

    <div class="app-content" id="main-ui">
        <div class="header">
            <div style="font-family: 'Orbitron'; font-size: 1rem; opacity: 0.8;">PULSE: v1.0</div>
            <div class="balance-box">
                <span id="bal-val" class="balance-amount">10,000</span>
                <span style="font-size: 0.7rem; color: var(--text-secondary); margin-left: 5px;">LP</span>
            </div>
        </div>

        <div class="slot-section">
            <h3 style="margin: 0; font-size: 1.2rem;">NEON SLOTS</h3>
            <div class="slot-reels">
                <div class="reel" id="r1">üíé</div>
                <div class="reel" id="r2">üíé</div>
                <div class="reel" id="r3">üíé</div>
            </div>
            <button class="btn-spin" onclick="playSlots()">–ö–†–£–¢–ò–¢–¨ (500 LP)</button>
        </div>

        <div class="info-card">
            <h4>üéü –ê–ö–¢–ò–í–ê–¶–ò–Ø –ö–û–î–ê</h4>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="promo-code" placeholder="–í–≤–µ–¥–∏ –ø—Ä–æ–º–æ...">
                <button onclick="claimPromo()" style="background: var(--accent); border:none; padding: 0 15px; border-radius: 10px; font-weight: bold;">OK</button>
            </div>
        </div>

        <div class="info-card">
            <h4>üë• –ü–†–ò–ì–õ–ê–°–ò –î–†–£–ì–ê</h4>
            <div id="ref-link" style="font-size: 0.8rem; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 10px; color: var(--pink); border: 1px dashed var(--pink);">
                t.me/lucky_pulse_bot?start=ref_pulse
            </div>
        </div>
    </div>

    <div class="nav">
        <div class="nav-item active">üè†</div>
        <div class="nav-item" onclick="tg.showAlert('–¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤ –ø—É—Å—Ç. –ë—É–¥—å –ø–µ—Ä–≤—ã–º!')">üèÜ</div>
        <div class="nav-item" onclick="tg.showConfirm('–í—ã–π—Ç–∏ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é?')">üë§</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.headerColor = '#050508';
        tg.backgroundColor = '#050508';

        let balance = 10000;
        const symbols = ['üíé', 'üé∞', 'üî•', '‚≠êÔ∏è', 'üçí'];

        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loader').style.display = 'none';
                    document.body.classList.add('app-ready');
                }, 800);
            }, 3000); // 3 —Å–µ–∫—É–Ω–¥—ã "–∫—Ä–∞—Å–∏–≤–æ–π" –∑–∞–≥—Ä—É–∑–∫–∏
        };

        function playSlots() {
            if (balance < 500) {
                tg.showAlert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ LP!');
                return;
            }

            balance -= 500;
            updateUI();
            tg.HapticFeedback.impactOccurred('medium');

            // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
            let interval = setInterval(() => {
                document.getElementById('r1').innerText = symbols[Math.floor(Math.random() * symbols.length)];
                document.getElementById('r2').innerText = symbols[Math.floor(Math.random() * symbols.length)];
                document.getElementById('r3').innerText = symbols[Math.floor(Math.random() * symbols.length)];
            }, 50);

            setTimeout(() => {
                clearInterval(interval);
                const res1 = symbols[Math.floor(Math.random() * symbols.length)];
                const res2 = symbols[Math.floor(Math.random() * symbols.length)];
                const res3 = symbols[Math.floor(Math.random() * symbols.length)];

                document.getElementById('r1').innerText = res1;
                document.getElementById('r2').innerText = res2;
                document.getElementById('r3').innerText = res3;

                checkWin(res1, res2, res3);
            }, 1500);
        }

        function checkWin(a, b, c) {
            if (a === b && b === c) {
                balance += 5000;
                tg.showAlert('JACKPOT! +5,000 LP');
                tg.HapticFeedback.notificationOccurred('success');
            } else if (a === b || b === c || a === c) {
                balance += 1000;
                tg.showAlert('–ú–∞–ª–∞—è –ø–æ–±–µ–¥–∞! +1,000 LP');
            }
            updateUI();
        }

        function updateUI() {
            document.getElementById('bal-val').innerText = balance.toLocaleString();
        }

        function claimPromo() {
            const input = document.getElementById('promo-code');
            if(input.value.toUpperCase() === 'LUCKY') {
                balance += 3000;
                updateUI();
                tg.showAlert('–ö–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! +3000 LP');
                input.value = '';
            } else {
                tg.showAlert('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥!');
            }
        }
    </script>
</body>
</html>